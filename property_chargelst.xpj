<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="insert into %{dbtable} (year,month,chargename,chargetype,chargerule,num,price,amount,id_comm,id_build,id_room,meterlast,metercur) select %{year},%{month},'%{chargename}',%{chargetype[id_charge]},%{chargetype[rule]},tnum,tprice,%{chargerule[formula]},%{id_comm[id_comm]},%{id_build[id_build]},%{id_room[id_room]},tmeterlast,tmetercur from (select %{num} as tnum,%{price} as tprice,'%{meterlast}' tmeterlast,'%{metercur}' tmetercur,area_ct tarea_ct FROM mylayout.property_room WHERE id_room='%{id_room[id_room]}') t" qryfmtOpUpdate="UPDATE mylayout.property_chargelst c JOIN (select %{num} as tnum,%{price} as tprice,'%{meterlast}' tmeterlast,'%{metercur}' tmetercur,area_ct tarea_ct FROM mylayout.property_room WHERE id_room='%{id_room[id_room]}') t set %{data},amount=%{chargerule[formula]} where %{where}" loadedClick="0" tableNm="property_chargelst" referLst="0" onLoadInit="0" tableTxt="property_chargelst" LstTP="Lst" lines2Link="" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>]]></DataLstExtElmt><Ctrls><Ctrl Required="1" ctrldbname="mylayout." name="id_comm" ctrldbtable="property_community" xTp="ComboBox" ctrldbdata="name_comm,id_comm" ctrldbdatarel="id_comm" ctrltype="ComboBox"><extelmt><![CDATA[<OnSELENDOK><if cond="%{id_comm[id_comm]}"><submit next="id_build"/><else/><submit next="id_build" function="resetcontent"/><submit next="id_room" function="resetcontent"/></if></OnSELENDOK>]]></extelmt><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" ctrldbname="mylayout." name="id_build" ctrldbwhere="id_comm='%{id_comm[id_comm]}'" ctrldbtable="property_building" xTp="ComboBox" ctrldbdata="name_build,id_build" ctrldbdatarel="id_build" ctrltype="ComboBox"><extelmt><![CDATA[<OnSELENDOK><if cond="%{id_build[id_build]}"><submit next="id_room"/><else/><submit next="id_room" function="resetcontent"/></if></OnSELENDOK>]]></extelmt></Ctrl><Ctrl Required="1" ctrldbname="mylayout." name="id_room" ctrldbwhere="id_comm='%{id_comm[id_comm]}' and id_build='%{id_build[id_build]}'" ctrldbtable="property_room" xTp="ComboBox" ctrldbdata="name_room,id_room" ctrldbdatarel="id_room" ctrltype="ComboBox"/><Ctrl dbfcsm="1" Required="1" ctrldbname="mylayout." name="chargetype" ctrldbtable="property_charge" xTp="ComboBox" ctrldbdata="name_charge chargename,rule,price,id_charge" ctrldbdatarel="id_charge" ctrltype="ComboBox"><extelmt><![CDATA[<OnSelEndOk><assign name="chargerule[id_rule]" expr="%{chargetype[rule]}" function="setsel"/></OnSelEndOk>]]></extelmt><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" noquery="1" name="price" xTp="TextBox" ctrltype="TextBox"/><Ctrl Required="1" noquery="1" name="num" xTp="TextBox" ctrltype="TextBox"/><Ctrl Required="1" name="year" xTp="ComboBox" ctrldbdata="2019~2099" ctrltype="ComboBox"/><Ctrl name="month" xTp="ComboBox" ctrldbdata="01~12" ctrltype="ComboBox"/><Ctrl noquery="1" name="chargename" noUpdate="1"/><Ctrl noquery="1" ctrldbname="mylayout." name="chargerule" ctrldbtable="property_chargerule" xTp="ComboBox" ctrldbdata="name_rule,formula,id_rule" ctrldbdatarel="id_rule" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl noquery="1" name="meterlast" noUpdate="1"/><Ctrl noquery="1" name="metercur" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="amount" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="dt_pay" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="id_payment" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="id_accountant" noInsert="1" noUpdate="1"/><Ctrl noquery="1" name="yy_sxid"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="enteredby" insertparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="stat" insertparam="1" noUpdate="1"/><Ctrl noused="1" noquery="1" name="id_corp"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="id_chargelst" noInsert="1" noInAndUp="1" noUpdate="1" xTp="TextBox" ctrltype="TextBox"/></Ctrls></biztoolcfg>